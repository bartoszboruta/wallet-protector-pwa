(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{62:function(e,t,n){"use strict";var r=new(n(63).a)("WalletProtector");r.version(1).stores({categories:"++id,name,createdAt,updatedAt"}),r.version(1).stores({costs:"++id,categoryId,cost,createdAt,updatedAt"}),t.a=r},64:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},65:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},66:function(e,t,n){var r={corePath:"https://cdn.jsdelivr.net/gh/naptha/tesseract.js-core@0.1.0/index.js",langPath:"https://tessdata.projectnaptha.com/3.02/"},s=n(67).version;r.workerPath="https://cdn.jsdelivr.net/gh/naptha/tesseract.js@"+s+"/dist/worker.js",t.defaultOptions=r,t.spawnWorker=function(e,t){if(window.Blob&&window.URL)var n=new Blob(['importScripts("'+t.workerPath+'");']),r=new Worker(window.URL.createObjectURL(n));else r=new Worker(t.workerPath);return r.onmessage=function(t){var n=t.data;e._recv(n)},r},t.terminateWorker=function(e){e.worker.terminate()},t.sendPacket=function(e,t){!function e(t,n){if("string"===typeof t){if(/^\#/.test(t))return e(document.querySelector(t),n);if(/(blob|data)\:/.test(t)){var r=new Image;return r.src=t,void(r.onload=function(t){return e(r,n)})}var s=new XMLHttpRequest;return s.open("GET",t,!0),s.responseType="blob",s.onload=function(t){return e(s.response,n)},s.onerror=function(r){/^https?:\/\//.test(t)&&!/^https:\/\/crossorigin.me/.test(t)&&(console.debug("Attempting to load image with CORS proxy"),e("https://crossorigin.me/"+t,n))},void s.send(null)}if(t instanceof File){var o=new FileReader;return o.onload=function(t){return e(o.result,n)},void o.readAsDataURL(t)}if(t instanceof Blob)return e(URL.createObjectURL(t),n);if(t.getContext)return e(t.getContext("2d"),n);if("IMG"==t.tagName||"VIDEO"==t.tagName){var a=document.createElement("canvas");a.width=t.naturalWidth||t.videoWidth,a.height=t.naturalHeight||t.videoHeight;var i=a.getContext("2d");return i.drawImage(t,0,0),e(i,n)}if(t.getImageData){var c=t.getImageData(0,0,t.canvas.width,t.canvas.height);return e(c,n)}return n(t);throw new Error("Missing return in loadImage cascade")}(t.payload.image,function(n){t.payload.image=n,e.worker.postMessage(t)})}},67:function(e){e.exports={name:"tesseract.js",version:"1.0.14",description:"Pure Javascript Multilingual OCR",main:"src/index.js",scripts:{start:'concurrently --kill-others "watchify src/index.js  -t [ envify --NODE_ENV development ] -t [ babelify --presets [ es2015 ] ] -o dist/tesseract.dev.js --standalone Tesseract" "watchify src/browser/worker.js  -t [ envify --NODE_ENV development ] -t [ babelify --presets [ es2015 ] ] -o dist/worker.dev.js" "http-server -p 7355"',build:"browserify src/index.js -t [ babelify --presets [ es2015 ] ] -o dist/tesseract.js --standalone Tesseract && browserify src/browser/worker.js -t [ babelify --presets [ es2015 ] ] -o dist/worker.js && uglifyjs dist/tesseract.js --source-map -o dist/tesseract.min.js && uglifyjs dist/worker.js --source-map -o dist/worker.min.js",release:"npm run build && git commit -am 'new release' && git push && git tag `jq -r '.version' package.json` && git push origin --tags && npm publish"},browser:{"./src/node/index.js":"./src/browser/index.js"},author:"",license:"Apache-2.0",devDependencies:{"babel-preset-es2015":"^6.16.0",babelify:"^7.3.0",browserify:"^13.1.0",concurrently:"^3.1.0",envify:"^3.4.1","http-server":"^0.9.0",pako:"^1.0.3","uglify-js":"^3.4.9",watchify:"^3.7.0"},dependencies:{"file-type":"^3.8.0","isomorphic-fetch":"^2.2.1","is-url":"1.2.2","jpeg-js":"^0.2.0","level-js":"^2.2.4","node-fetch":"^1.6.3","object-assign":"^4.1.0","png.js":"^0.2.1","tesseract.js-core":"^1.0.2"},repository:{type:"git",url:"https://github.com/naptha/tesseract.js.git"},bugs:{url:"https://github.com/naptha/tesseract.js/issues"},homepage:"https://github.com/naptha/tesseract.js"}},76:function(e,t,n){var r=n(64),s=n(65),o=n(66),a=n(77),i=n(78),c=n(67).version,u=function(){"use strict";function e(t){r(this,e),this.worker=null,this.workerOptions=t,this._currentJob=null,this._queue=[]}return s(e,[{key:"recognize",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._delay(function(r){"string"===typeof n&&(n={lang:n}),n.lang=n.lang||"eng",r._send("recognize",{image:e,options:n,workerOptions:t.workerOptions})})}},{key:"detect",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._delay(function(r){r._send("detect",{image:e,options:n,workerOptions:t.workerOptions})})}},{key:"terminate",value:function(){this.worker&&o.terminateWorker(this),this.worker=null,this._currentJob=null,this._queue=[]}},{key:"_delay",value:function(e){var t=this;this.worker||(this.worker=o.spawnWorker(this,this.workerOptions));var n=new i(this);return this._queue.push(function(r){t._queue.shift(),t._currentJob=n,e(n)}),this._currentJob||this._dequeue(),n}},{key:"_dequeue",value:function(){this._currentJob=null,this._queue.length&&this._queue[0]()}},{key:"_recv",value:function(e){"resolve"===e.status&&"recognize"===e.action&&(e.data=a(e.data)),this._currentJob.id===e.jobId?this._currentJob._handle(e):console.warn("Job ID "+e.jobId+" not known.")}}]),e}();e.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new u(Object.assign({},o.defaultOptions,t));return n.create=e,n.version=c,n}()},77:function(e,t){e.exports=function(e){return e.paragraphs=[],e.lines=[],e.words=[],e.symbols=[],e.blocks.forEach(function(t){t.page=e,t.lines=[],t.words=[],t.symbols=[],t.paragraphs.forEach(function(n){n.block=t,n.page=e,n.words=[],n.symbols=[],n.lines.forEach(function(r){r.paragraph=n,r.block=t,r.page=e,r.symbols=[],r.words.forEach(function(s){s.line=r,s.paragraph=n,s.block=t,s.page=e,s.symbols.forEach(function(o){o.word=s,o.line=r,o.paragraph=n,o.block=t,o.page=e,o.line.symbols.push(o),o.paragraph.symbols.push(o),o.block.symbols.push(o),o.page.symbols.push(o)}),s.paragraph.words.push(s),s.block.words.push(s),s.page.words.push(s)}),r.block.lines.push(r),r.page.lines.push(r)}),n.page.paragraphs.push(n)})}),e}},78:function(e,t,n){var r=n(64),s=n(65),o=n(66),a=0;e.exports=function(){"use strict";function e(t){r(this,e),this.id="Job-"+ ++a+"-"+Math.random().toString(16).slice(3,8),this._instance=t,this._resolve=[],this._reject=[],this._progress=[],this._finally=[]}return s(e,[{key:"then",value:function(e,t){return this._resolve.push?this._resolve.push(e):e(this._resolve),t&&this.catch(t),this}},{key:"catch",value:function(e){return this._reject.push?this._reject.push(e):e(this._reject),this}},{key:"progress",value:function(e){return this._progress.push(e),this}},{key:"finally",value:function(e){return this._finally.push(e),this}},{key:"_send",value:function(e,t){o.sendPacket(this._instance,{jobId:this.id,action:e,payload:t})}},{key:"_handle",value:function(e){var t=e.data,n=!1;"resolve"===e.status?(0===this._resolve.length&&console.log(t),this._resolve.forEach(function(e){var n=e(t);n&&"function"==typeof n.then&&console.warn("TesseractJob instances do not chain like ES6 Promises. To convert it into a real promise, use Promise.resolve.")}),this._resolve=t,this._instance._dequeue(),n=!0):"reject"===e.status?(0===this._reject.length&&console.error(t),this._reject.forEach(function(e){return e(t)}),this._reject=t,this._instance._dequeue(),n=!0):"progress"===e.status?this._progress.forEach(function(e){return e(t)}):console.warn("Message type unknown",e.status),n&&this._finally.forEach(function(e){return e(t)})}}]),e}()},83:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),o=n(16),a=n(14),i=n(76),c=n.n(i),u=n(7),l=function(e){var t=e.strokeStyle,n=void 0===t?"#c75353":t,o=e.lineJoin,a=void 0===o?"round":o,i=e.lineWidth,c=void 0===i?5:i,l=e.onDrawEnd,h=void 0===l?function(){}:l,d=e.onCancel,p=void 0===d?function(){}:d,f=Object(r.useRef)(null),g=Object(r.useState)(!1),v=Object(u.a)(g,2),b=v[0],w=v[1],m=Object(r.useState)(300),y=Object(u.a)(m,2),j=y[0],k=y[1],_=Object(r.useState)(400),E=Object(u.a)(_,2),O=E[0],x=E[1];Object(r.useEffect)(function(){window.addEventListener("resize",P),P()},[]);var C=[],J=[],I=[],P=function(){var e=f.current.parentNode.clientWidth;k(e),x(e<320?e:320)},T=function(){w(!0)},q=function(e){if(b){var t=e.pageX-f.current.offsetLeft,n=e.pageY-f.current.offsetTop;D({dragging:!0,x:t,y:n}),M()}},N=function(){w(!1),h(f.current.getContext("2d"))},D=function(e){var t=e.dragging,n=e.x,r=e.y;C.push(n),J.push(r),I.push(t)},M=function(){var e=f.current.getContext("2d");e.strokeStyle=n,e.lineJoin=a,e.lineWidth=c;for(var t=0;t<C.length;t++)e.beginPath(),I[t]&&t?e.moveTo(C[t-1],J[t-1]):e.moveTo(C[t]-1,J[t]),e.lineTo(C[t],J[t]),e.closePath(),e.stroke()};return s.a.createElement("div",{className:"drawfield"},s.a.createElement("canvas",{"data-paper-resize":!0,height:O,onMouseDown:T,onMouseMove:q,onMouseUp:N,onTouchCancel:T,onTouchMove:q,onTouchStart:N,ref:f,width:j}),s.a.createElement("button",{className:"btn",onClick:function(){var e=f.current.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),p()}},"Clear"))},h=function(){var e=Object(r.useContext)(o.a).setCost;return s.a.createElement(l,{onCancel:function(){return e(0)},onDrawEnd:function(t){c.a.recognize(t,{classify_bln_numeric_mode:!0,tessedit_char_whitelist:"0123456789,."}).progress(function(e){return console.info(e)}).catch(function(e){return console.error(e)}).then(function(t){return e(parseFloat(t.text))})}})},d=n(62),p=Object(r.lazy)(function(){return n.e(6).then(n.bind(null,87))});t.default=function(){var e=Object(r.useContext)(o.a),t=e.cost,n=e.setCost,i=Object(r.useContext)(a.a).categoryId;return s.a.createElement("div",{className:"form"},s.a.createElement(h,null),s.a.createElement("div",{className:"content"},s.a.createElement("input",{className:"input",onChange:function(e){var t=e.target.value;return n(t)},type:"number",value:t}),s.a.createElement("button",{className:"btn",disabled:!t||!i,onClick:function(){var e=new Date,r=parseFloat(t);d.a.table("costs").add({cost:r,categoryId:i,createdAt:e,updatedAt:e}).then(function(){return n(0)})}},"Accept")),s.a.createElement(r.Suspense,{fallback:s.a.createElement("div",null,"Loading...")},s.a.createElement(p,null)))}}}]);
//# sourceMappingURL=3.197921a1.chunk.js.map